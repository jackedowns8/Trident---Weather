<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Trident</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="dist/css/swiper.min.css">
</head>
<body>
    <div class="forecastHeader"><button class="back" type="button" id="backButton" onclick="history.go(-1); localStorage.setItem('refresh', '1');"><img src="image/backArrow.png" alt="backArrow"/></button><div class="title">Save</div></div>
    <div class="favouritesInfo">
      Select a slot below to save your new favourite location:
    </div>
    <div class="favourites0">
      <button class="favouriteLocation" type="button" id="Location0" onclick="saveFavourite0();">1</button><button class="editFavourite" type="button" id="editLocation0" onclick="editFavourite0();">Edit</button>
    </div>
    <div class="favourites1">
      <button class="favouriteLocation" type="button" id="Location1" onclick="saveFavourite1();">2</button><button class="editFavourite" type="button" id="editLocation0" onclick="editFavourite0();">Edit</button>
    </div>
    <div class="favourites0">
      <button class="favouriteLocation" type="button" id="Location2" onclick="saveFavourite2();">3</button><button class="editFavourite" type="button" id="editLocation0" onclick="editFavourite0();">Edit</button>
    </div>
    <div class="favourites1">
      <button class="favouriteLocation" type="button" id="Location3" onclick="saveFavourite3();">4</button><button class="editFavourite" type="button" id="editLocation0" onclick="editFavourite0();">Edit</button>
    </div>
    <div class="favourites0">
      <button class="favouriteLocation" type="button" id="Location4" onclick="saveFavourite4();">5</button><button class="editFavourite" type="button" id="editLocation0" onclick="editFavourite0();">Edit</button>
    </div>
    <!-- Weather + Tides Etc. -->
    <script language="XML" src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>
    <script src="Sweet Alert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" type="text/css" href="Sweet Alert/dist/sweetalert.css">
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript" src="toastPlugin.js"></script>
    <script type="text/java" src="ToastPlugin.java"></script>
    <script type="text/javascript">
            app.initialize();
			
			var coordinates = localStorage.getItem("coordinates");
			var userLocation = localStorage.getItem("userLocation");
			var userLat = localStorage.getItem("userLat");
			var userLong = localStorage.getItem("userLong");
			var location0 = localStorage.getItem("favourite0");
			var location1 = localStorage.getItem("favourite1");
			var location2 = localStorage.getItem("favourite2");
			var location3 = localStorage.getItem("favourite3");
			var location4 = localStorage.getItem("favourite4");
			
			var favourite0COORDS = localStorage.getItem("favourite0COORDS");
			var favourite0Lat = localStorage.getItem("favourite0Lat");
			var favourite0Long = localStorage.getItem("favourite0Long");
			
			var favourite1COORDS = localStorage.getItem("favourite1COORDS");
			var favourite1Lat = localStorage.getItem("favourite0Lat");
			var favourite1Long = localStorage.getItem("favourite0Long");
			
			var favourite2COORDS = localStorage.getItem("favourite2COORDS");
			var favourite2Lat = localStorage.getItem("favourite2Lat");
			var favourite2Long = localStorage.getItem("favourite2Long");
			
			var favourite3COORDS = localStorage.getItem("favourite3COORDS");
			var favourite3Lat = localStorage.getItem("favourite3Lat");
			var favourite3Long = localStorage.getItem("favourite3Long");
			
			var favourite4COORDS = localStorage.getItem("favourite4COORDS");
			var favourite4Lat = localStorage.getItem("favourite4Lat");
			var favourite4Long = localStorage.getItem("favourite4Long");
			
			var favourite0Name = localStorage.getItem("favourite0Name");
			var favourite1Name = localStorage.getItem("favourite1Name");
			var favourite2Name = localStorage.getItem("favourite2Name");
			var favourite3Name = localStorage.getItem("favourite3Name");
			var favourite4Name = localStorage.getItem("favourite4Name");
			
			//Names
			if (favourite0Name == null || favourite0Name == "null") {
				favourite0Name = "Empty";
			}
			if (favourite1Name == null || favourite1Name == "null") {
				favourite1Name = "Empty";
			}
			if (favourite2Name == null || favourite2Name == "null") {
				favourite2Name = "Empty";
			}
			if (favourite3Name == null || favourite3Name == "null") {
				favourite3Name = "Empty";
			}
			if (favourite4Name == null || favourite4Name == "null") {
				favourite4Name = "Empty";
			}
			
			//Location
			if (location0 == null || location0 == "null") {
				location0 = "";
			}
			if (location1 == null || location1 == "null") {
				location1 = "";
			}
			if (location2 == null || location2 == "null") {
				location2 = "";
			}
			if (location3 == null || location3 == "null") {
				location3 = "";
			}
			if (location4 == null || location4 == "null") {
				location4 = "";
			}
			
			document.getElementById("Location0").innerHTML = favourite0Name + "<div class='favouriteLocationDetail'>(" + location0 + ")</div>";
			document.getElementById("Location1").innerHTML = favourite1Name + "<div class='favouriteLocationDetail'>(" + location1 + ")</div>";
			document.getElementById("Location2").innerHTML = favourite2Name + "<div class='favouriteLocationDetail'>(" + location2 + ")</div>";
			document.getElementById("Location3").innerHTML = favourite3Name + "<div class='favouriteLocationDetail'>(" + location3 + ")</div>";
			document.getElementById("Location4").innerHTML = favourite4Name + "<div class='favouriteLocationDetail'>(" + location4 + ")</div>";
			
			function saveFavourite0(){
				localStorage.setItem("favourite0COORDS", coordinates);
				localStorage.setItem("favourite0", userLocation);
				localStorage.setItem("favourite0Lat", userLat);
				localStorage.setItem("favourite0Long", userLong);
				
				swal({
					title: "Name",
					text: "Give your favourite location a name: ",
					type: "input",
					showCancelButton: true,
					closeOnConfirm: false,
					animation: "slide-from-top",
					inputPlaceholder: "e.g. Home" 
				},
				function(inputValue){
					if (inputValue === false) return false;
					if (inputValue === "") {
						swal.showInputError("You need to give your favourite location a name!");
						return false
					}
					localStorage.setItem("favourite0Name", inputValue);
					swal({   
				  		title: "Saved!",
				  		text: inputValue + ' (' + userLocation + ') saved to favourites!',
				  		type: "success",
				  		showCancelButton: false,
				  		confirmButtonText: "Done" 
					},
				 	function(isConfirm){
					 	if (isConfirm) {
						 history.go(-1);
					 	}
				 	});
				});
			}
			function saveFavourite1(){
				localStorage.setItem("favourite1COORDS", coordinates);
				localStorage.setItem("favourite1", userLocation);
				localStorage.setItem("favourite1Lat", userLat);
				localStorage.setItem("favourite1Long", userLong);
				
				swal({
					title: "Name",
					text: "Give your favourite location a name: ",
					type: "input",
					showCancelButton: true,
					closeOnConfirm: false,
					animation: "slide-from-top",
					inputPlaceholder: "e.g. Home" 
				},
				function(inputValue){
					if (inputValue === false) return false;
					if (inputValue === "") {
						swal.showInputError("You need to give your favourite location a name!");
						return false
					}
					localStorage.setItem("favourite1Name", inputValue);
					swal({   
				  		title: "Saved!",
				  		text: inputValue + ' (' + userLocation + ') saved to favourites!',
				  		type: "success",
				  		showCancelButton: false,
				  		confirmButtonText: "Done" 
					},
				 	function(isConfirm){
					 	if (isConfirm) {
						 history.go(-1);
					 	}
				 	});
				});
			}
			function saveFavourite2(){
				localStorage.setItem("favourite2COORDS", coordinates);
				localStorage.setItem("favourite2", userLocation);
				localStorage.setItem("favourite2Lat", userLat);
				localStorage.setItem("favourite2Long", userLong);
				
				swal({
					title: "Name",
					text: "Give your favourite location a name: ",
					type: "input",
					showCancelButton: true,
					closeOnConfirm: false,
					animation: "slide-from-top",
					inputPlaceholder: "e.g. Home" 
				},
				function(inputValue){
					if (inputValue === false) return false;
					if (inputValue === "") {
						swal.showInputError("You need to give your favourite location a name!");
						return false
					}
					localStorage.setItem("favourite2Name", inputValue);
					swal({   
				  		title: "Saved!",
				  		text: inputValue + ' (' + userLocation + ') saved to favourites!',
				  		type: "success",
				  		showCancelButton: false,
				  		confirmButtonText: "Done" 
					},
				 	function(isConfirm){
					 	if (isConfirm) {
						 history.go(-1);
					 	}
				 	});
				});
			}
			function saveFavourite3(){
				localStorage.setItem("favourite3COORDS", coordinates);
				localStorage.setItem("favourite3", userLocation);
				localStorage.setItem("favourite3Lat", userLat);
				localStorage.setItem("favourite3Long", userLong);
				
				swal({
					title: "Name",
					text: "Give your favourite location a name: ",
					type: "input",
					showCancelButton: true,
					closeOnConfirm: false,
					animation: "slide-from-top",
					inputPlaceholder: "e.g. Home" 
				},
				function(inputValue){
					if (inputValue === false) return false;
					if (inputValue === "") {
						swal.showInputError("You need to give your favourite location a name!");
						return false
					}
					localStorage.setItem("favourite3Name", inputValue);
					swal({   
				  		title: "Saved!",
				  		text: inputValue + ' (' + userLocation + ') saved to favourites!',
				  		type: "success",
				  		showCancelButton: false,
				  		confirmButtonText: "Done" 
					},
				 	function(isConfirm){
					 	if (isConfirm) {
						 history.go(-1);
					 	}
				 	});
				});
			}
			function saveFavourite4(){
				localStorage.setItem("favourite4COORDS", coordinates);
				localStorage.setItem("favourite4", userLocation);
				localStorage.setItem("favourite4Lat", userLat);
				localStorage.setItem("favourite4Long", userLong);
				
				swal({
					title: "Name",
					text: "Give your favourite location a name: ",
					type: "input",
					showCancelButton: true,
					closeOnConfirm: false,
					animation: "slide-from-top",
					inputPlaceholder: "e.g. Home" 
				},
				function(inputValue){
					if (inputValue === false) return false;
					if (inputValue === "") {
						swal.showInputError("You need to give your favourite location a name!");
						return false
					}
					localStorage.setItem("favourite4Name", inputValue);
					swal({   
				  		title: "Saved!",
				  		text: inputValue + ' (' + userLocation + ') saved to favourites!',
				  		type: "success",
				  		showCancelButton: false,
				  		confirmButtonText: "Done" 
					},
				 	function(isConfirm){
					 	if (isConfirm) {
						 history.go(-1);
					 	}
				 	});
				});
			}
    </script>
</body>
</html>